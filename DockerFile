FROM node:22-alpine

WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .

# ให้เลือก command ผ่าน ARG
ARG CMD=dev
ENV CMD=${CMD}

EXPOSE 1000

CMD ["sh", "-c", "npm run $CMD"]